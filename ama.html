<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ask Me Anything | Fractal Accelerator</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="index.html" class="logo">FRACTAL</a>
            <nav>
                <ul class="nav-links">
                    <li><a href="apply.html">Apply Now</a></li>
                    <li><a href="hire.html">Hire Fractal Engineers</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="container" style="max-width: 600px;">
            <div id="formSection">
                <div class="window">
                    <div class="window-title">ASK ME ANYTHING</div>
                    <div class="window-content">
                        <div class="form-header">
                            <h1>Ask me about SWE jobs in the Age of AI</h1>
                            <p style="text-align: left; margin-top: var(--space-4); line-height: 1.6;">In the last two years, I've placed over 50 junior engineers in full-time jobs. I write about the future of tech &amp; economy on my twitter and my substack. I love talking to new people + unblocking my peers. Ask me a question about working as an engineer in the age of AI, and I'll do my best to get back to you :)</p>
                            <p style="text-align: left; margin-top: var(--space-3); font-weight: 700;">&mdash; Andrew</p>
                        </div>

                        <div id="alertError" class="alert-error"></div>

                        <form id="amaForm">
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" id="name" name="name" required>
                                <div class="error-message">Please enter your name</div>
                            </div>

                            <div class="form-group">
                                <label for="email">Where can I send my response?</label>
                                <input type="email" id="email" name="email" required>
                                <div class="error-message">Please enter a valid email address</div>
                            </div>

                            <div class="form-group">
                                <label for="twitter">Twitter</label>
                                <input type="text" id="twitter" name="twitter" required>
                                <div class="error-message">Please enter your Twitter handle</div>
                            </div>

                            <div class="form-group">
                                <label for="phone">If it's a long answer, might call you!</label>
                                <input type="tel" id="phone" name="phone" required>
                                <div class="error-message">Please enter your phone number</div>
                            </div>

                            <div class="form-group">
                                <label for="context">Helpful context: current job title, time on the job hunt, SWE experience</label>
                                <textarea id="context" name="context" rows="4" required></textarea>
                                <div class="error-message">Please provide some context</div>
                            </div>

                            <div class="form-group">
                                <label for="question">Your question</label>
                                <textarea id="question" name="question" rows="5" required></textarea>
                                <div class="error-message">Please enter your question</div>
                            </div>

                            <div class="form-group" id="tagGroup">
                                <label>Thanks for your question! If it's relevant to a lot of my audience I might tweet it publicly. If I do, can I tag you in the response?</label>
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="tagPreference" value="tag-me" required>
                                        <span>Tag me!</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="tagPreference" value="keep-anon">
                                        <span>Keep me anon</span>
                                    </label>
                                </div>
                                <div class="error-message">Please select an option</div>
                            </div>

                            <button type="submit" class="btn">Submit</button>
                        </form>
                    </div>
                </div>
            </div>

            <div id="successSection" style="display: none;">
                <div class="window">
                    <div class="window-title">QUESTION SUBMITTED</div>
                    <div class="window-content">
                        <div class="success-message">
                            <h2>Thanks for your question!</h2>
                            <p>I'll do my best to get back to you. If it's a longer answer, I might give you a call.</p>
                            <button class="btn" onclick="resetForm()">Ask Another</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-text">
            <p>&copy; 2026 FRACTAL ACCELERATOR. NYC.</p>
            <p>Questions? <a href="mailto:hello@fractaltech.nyc">hello@fractaltech.nyc</a></p>
        </div>
    </footer>

    <script src="js/form-utils.js"></script>
    <script>
        var form = document.getElementById('amaForm');
        var formSection = document.getElementById('formSection');
        var successSection = document.getElementById('successSection');
        var alertError = document.getElementById('alertError');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            alertError.style.display = 'none';
            clearFormErrors(form);

            var isValid = validateFields(form, ['name', 'email', 'twitter', 'phone', 'context', 'question']);

            var tagPreference = document.querySelector('input[name="tagPreference"]:checked');
            if (!tagPreference) {
                document.getElementById('tagGroup').classList.add('error');
                isValid = false;
            }

            if (!isValid) return;

            submitForm({
                url: '/api/submit-ama',
                data: {
                    name: document.getElementById('name').value.trim(),
                    email: document.getElementById('email').value.trim(),
                    twitter: document.getElementById('twitter').value.trim(),
                    phone: document.getElementById('phone').value.trim(),
                    context: document.getElementById('context').value.trim(),
                    question: document.getElementById('question').value.trim(),
                    tag_preference: tagPreference.value
                },
                button: form.querySelector('button[type="submit"]'),
                onSuccess: function() {
                    formSection.style.display = 'none';
                    successSection.style.display = 'block';
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                },
                onError: function(error) {
                    alertError.textContent = error.message || 'Something went wrong. Please try again.';
                    alertError.style.display = 'block';
                }
            });
        });

        function resetForm() {
            form.reset();
            clearFormErrors(form);
            alertError.style.display = 'none';
            successSection.style.display = 'none';
            formSection.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        attachRealtimeValidation('#amaForm');

        document.querySelectorAll('input[name="tagPreference"]').forEach(function(radio) {
            radio.addEventListener('change', function() {
                document.getElementById('tagGroup').classList.remove('error');
            });
        });
    </script>
</body>
</html>
